<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Operacional - 1º BBM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bombeiros-orange': '#FF8C00',
                        'bombeiros-yellow': '#FFD700',
                        'fire-red': '#DC2626',
                        'card-bg': 'rgba(31, 41, 55, 0.9)',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; }
        .hero-background { 
            background-image: linear-gradient(rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.9)), url('https://images.unsplash.com/photo-1516546453174-5f10006289aa?auto=format&fit=crop&q=80&w=1000'); 
            background-size: cover; background-position: center; 
        }
        .stat-card { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid rgba(255,255,255,0.1); }
        .guarnicao-button { transition: all 0.2s ease; cursor: pointer; border: 1px solid rgba(255,255,255,0.05); }
        .guarnicao-button:hover { transform: translateY(-3px); border-color: #FFD700; background-color: rgba(55, 65, 81, 1); }
        .guarnicao-details-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); display: none; align-items: center; justify-content: center; z-index: 10000; backdrop-filter: blur(4px); }
        .guarnicao-details-overlay.active { display: flex; }
    </style>
</head>
<body class="text-white min-h-screen hero-background">

<header class="py-6 text-center border-b border-white/10">
    <div class="flex justify-center gap-6 items-center px-4">
        <img src="https://www.bombeiros.rs.gov.br/themes/sitecbmrs/images/logos/logo.png" class="h-12">
        <h1 class="text-xl font-black text-bombeiros-yellow uppercase tracking-widest">1º BBM - Porto Alegre</h1>
        <img src="images/brasao_1BBM_PARA_site.png" class="h-12">
    </div>
</header>

<main class="max-w-6xl mx-auto p-4 lg:p-8">
    
    <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-8">
        <div class="stat-card p-4 rounded-xl text-center">
            <p class="text-[10px] text-gray-400 font-bold uppercase">Viaturas ABT</p>
            <p id="total-abt" class="text-2xl font-black text-bombeiros-orange">0</p>
        </div>
        <div class="stat-card p-4 rounded-xl text-center">
            <p class="text-[10px] text-gray-400 font-bold uppercase">Viaturas AR</p>
            <p id="total-ar" class="text-2xl font-black text-blue-400">0</p>
        </div>
        <div class="stat-card p-4 rounded-xl text-center border-l-2 border-l-bombeiros-yellow">
            <p class="text-[10px] text-gray-400 font-bold uppercase">Oficiais (CAP)</p>
            <p id="total-cap" class="text-2xl font-black text-white">0</p>
        </div>
        <div class="stat-card p-4 rounded-xl text-center">
            <p class="text-[10px] text-gray-400 font-bold uppercase">Graduados (SGT)</p>
            <p id="total-sgt" class="text-2xl font-black text-white">0</p>
        </div>
        <div class="stat-card p-4 rounded-xl text-center bg-white/5">
            <p class="text-[10px] text-bombeiros-yellow font-bold uppercase">Total Efetivo</p>
            <p id="total-militares" class="text-3xl font-black text-white">0</p>
        </div>
        <div class="stat-card p-4 rounded-xl text-center md:col-span-1 hidden md:block">
            <p class="text-[10px] text-gray-400 font-bold uppercase">Soldados (SD)</p>
            <p id="total-sd" class="text-2xl font-black text-white">0</p>
        </div>
    </div>

    <div id="guarnicoes-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
</main>

<div id="guarnicao-details-overlay" class="guarnicao-details-overlay" onclick="closeModal()">
    <div class="bg-gray-800 border border-gray-600 p-6 rounded-2xl max-w-sm w-full mx-4 shadow-2xl" onclick="event.stopPropagation()">
        <div id="modal-content"></div>
        <button class="mt-6 w-full bg-fire-red py-3 rounded-xl font-black" onclick="closeModal()">FECHAR</button>
    </div>
</div>

<script>
    const guarnicoesData = {
        "OFICIAL DE DIA": {
            "ATP-0640": { vtr: "Estado Maior", militares: [{ f: "OFICIAL", n: "CAP RODRIGO BORGES" }, { f: "MOT", n: "SD FELIPE IANZER" }], t: "24h" }
        },
        "AÇORIANOS": {
            "ABT-1364": { vtr: "ABT-1364", militares: [{ f: "CMT", n: "2º SGT KANOFRE" }, { f: "COV", n: "SD NATHAN" }, { f: "LD", n: "SD PIRES" }], t: "24h" },
            "AEM-0482": { vtr: "AEM-0482", militares: [{ f: "COV", n: "SD MUNDEL" }], t: "24h" }
        },
        "TERESÓPOLIS": {
            "ABT-0594": { vtr: "ABT-0594", militares: [{ f: "CMT", n: "SD CASSIANO" }, { f: "COV", n: "SD DEIVID" }, { f: "LD", n: "SD TEMP SPERLING" }], t: "24h" },
            "AR-0766": { vtr: "AR-0766", militares: [{ f: "CMT", n: "SD LOPES" }, { f: "COV", n: "SD VINÍCIUS" }], t: "24h" }
        },
        "ASSUNÇÃO": {
            "ABT-0596": { vtr: "ABT-0596", militares: [{ f: "CMT", n: "SD BRUM" }, { f: "COV", n: "SD TEMP PINTO" }, { f: "LD", n: "SD PORCELIS" }], t: "24h" }
        },
        "FLORESTA": {
            "ABT-0597": { vtr: "ABT-0597", militares: [{ f: "CMT", n: "2º SGT SAUL" }, { f: "COV", n: "SD TEMP DOTTA" }, { f: "LE", n: "SD CAMPOS" }], t: "24h" }
        },
        "RESTINGA": {
            "ABT-0598": { vtr: "ABT-0598", militares: [{ f: "CMT", n: "SD MARTINS" }, { f: "COV", n: "1º SGT RONALDO" }, { f: "LD", n: "SD ASSUNÇÃO" }], t: "24h" }
        },
        "BELÉM NOVO": {
            "ABT-0599": { vtr: "ABT-0599", militares: [{ f: "CMT", n: "SD DETONI" }, { f: "COV", n: "SD MAURÍCIO" }, { f: "LD", n: "SD COSME" }], t: "24h" }
        },
        "PASSO D'AREIA": {
            "ABT-0600": { vtr: "ABT-0600", militares: [{ f: "CMT", n: "SD THIAGO" }, { f: "COV", n: "2º SGT FABRICIO" }, { f: "LE", n: "SD DA SILVA" }], t: "24h" }
        },
        "PARTENON": {
            "ABT-1365": { vtr: "ABT-1365", militares: [{ f: "CMT", n: "SD BATISTA" }, { f: "COV", n: "2º SGT BECKER" }, { f: "LD", n: "SD CABRAL" }], t: "24h" }
        },
        "BBS - ESPECIAL": {
            "MERGULHO": { vtr: "ATP-0555", militares: [{ f: "CMT", n: "2º SGT SIMAS" }, { f: "MERG", n: "SD MATTE" }, { f: "MERG", n: "SD SANTTANNA" }], t: "12h" },
            "AQUÁTICA": { vtr: "EABS-08", militares: [{ f: "CMT", n: "1º SGT MARCELO" }, { f: "COND", n: "SD ROBERTO" }], t: "24h" }
        }
    };

    function updateStats() {
        let abt = 0, ar = 0, sd = 0, sgt = 0, cap = 0;
        const processedNames = new Set();

        Object.values(guarnicoesData).forEach(unidade => {
            Object.keys(unidade).forEach(vtrKey => {
                if (vtrKey.includes('ABT')) abt++;
                if (vtrKey.includes('AR-')) ar++;
                
                unidade[vtrKey].militares.forEach(m => {
                    if (!processedNames.has(m.n)) {
                        processedNames.add(m.n);
                        if (m.n.includes('SD')) sd++;
                        if (m.n.includes('SGT')) sgt++;
                        if (m.n.includes('CAP')) cap++;
                    }
                });
            });
        });

        document.getElementById('total-abt').innerText = abt;
        document.getElementById('total-ar').innerText = ar;
        document.getElementById('total-sd').innerText = sd;
        document.getElementById('total-sgt').innerText = sgt;
        document.getElementById('total-cap').innerText = cap;
        document.getElementById('total-militares').innerText = processedNames.size;
    }

    function render() {
        const grid = document.getElementById('guarnicoes-grid');
        Object.keys(guarnicoesData).forEach(quartel => {
            const isOficial = quartel.includes("OFICIAL");
            const div = document.createElement('div');
            div.className = `guarnicao-button p-4 rounded-xl flex flex-col items-center justify-center text-center ${isOficial ? 'bg-orange-600/20 border-orange-500' : 'bg-gray-800/80'}`;
            div.innerHTML = `
                <span class="text-[10px] font-black uppercase text-gray-400 mb-2">${quartel}</span>
                <i class="fas fa-truck-moving text-2xl ${isOficial ? 'text-orange-500' : 'text-bombeiros-yellow'} mb-2"></i>
                <span class="text-[9px] font-bold text-white">VER EQUIPE</span>
            `;
            div.onclick = () => showModal(quartel);
            grid.appendChild(div);
        });
        updateStats();
    }

    function showModal(q) {
        let h = `<h3 class="text-xl font-black text-bombeiros-yellow mb-4 border-b border-white/10 pb-2">${q}</h3>`;
        Object.keys(guarnicoesData[q]).forEach(v => {
            const d = guarnicoesData[q][v];
            h += `<div class="mb-4 bg-black/30 p-3 rounded-lg">
                    <div class="flex justify-between text-xs font-bold text-orange-400 mb-2"><span>${d.vtr}</span><span>${d.t}</span></div>
                    ${d.militares.map(m => `<div class="flex justify-between text-sm border-b border-white/5 py-1">
                        <span class="text-gray-400">${m.f}:</span><span class="font-bold">${m.n}</span>
                    </div>`).join('')}
                </div>`;
        });
        document.getElementById('modal-content').innerHTML = h;
        document.getElementById('guarnicao-details-overlay').classList.add('active');
    }

    function closeModal() { document.getElementById('guarnicao-details-overlay').classList.remove('active'); }
    render();
</script>
</body>
</html>
